(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{4741:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,Z:()=>c});var a=r(5155),l=r(2115),s=r(5695);class n extends Error{}function o(e,t){let r;if("string"!=typeof e)throw new n("Invalid token specified: must be a string");t||(t={});let a=+(!0!==t.header),l=e.split(".")[a];if("string"!=typeof l)throw new n(`Invalid token specified: missing part #${a+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(l)}catch(e){throw new n(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new n(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}n.prototype.name="InvalidTokenError";let i=(0,l.createContext)(null),u=e=>{let{children:t}=e,[r,n]=(0,l.useState)(void 0),u=(0,s.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return void n(null);try{let t=o(e);n(t)}catch(e){localStorage.removeItem("token"),n(null)}},[]);let c=async e=>{localStorage.setItem("token",e),n(o(e)),await u.push("/dashboard")},d=async()=>{localStorage.removeItem("token"),n(null),await u.push("/login")};return(0,a.jsx)(i.Provider,{value:{user:r,login:c,logout:d},children:t})},c=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("AuthContext must be used within AuthProvider");return e}},8007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),l=r(4741),s=r(2115),n=r(5695),o=r(3464);function i(){let{user:e,login:t}=(0,l.Z)(),r=(0,n.useRouter)(),[i,u]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[h,p]=(0,s.useState)("");if((0,s.useEffect)(()=>{e&&r.replace("/dashboard")},[e,r]),void 0===e)return(0,a.jsx)("p",{children:"Y\xfckleniyor..."});if(e)return null;let m=async e=>{e.preventDefault();try{let e=await o.A.post("http://localhost:5000/api/login",{email:i,password:c});t(e.data.token)}catch(e){var r,a;p((null==(a=e.response)||null==(r=a.data)?void 0:r.msg)||"Hata oluştu")}};return(0,a.jsxs)("div",{className:"max-w-sm mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Giriş Yap"}),h&&(0,a.jsx)("p",{className:"text-red-500 mb-2",children:h}),(0,a.jsxs)("form",{onSubmit:m,children:[(0,a.jsx)("input",{className:"w-full mb-2 p-2 border",placeholder:"E-posta",value:i,onChange:e=>u(e.target.value)}),(0,a.jsx)("input",{type:"password",className:"w-full mb-2 p-2 border",placeholder:"Şifre",value:c,onChange:e=>d(e.target.value)}),(0,a.jsx)("button",{className:"w-full bg-blue-500 text-white p-2",type:"submit",children:"Giriş"})]}),(0,a.jsxs)("p",{className:"mt-2",children:["Hesabın yok mu? ",(0,a.jsx)("a",{href:"/register",className:"text-blue-600 underline",children:"Kayıt ol"})]})]})}},9335:(e,t,r)=>{Promise.resolve().then(r.bind(r,8007))}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(9335)),_N_E=e.O()}]);